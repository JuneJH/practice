{"remainingRequest":"/Users/june/Desktop/work/practice/vue-family/node_modules/babel-loader/lib/index.js!/Users/june/Desktop/work/practice/vue-family/vue/my-vuex.js","dependencies":[{"path":"/Users/june/Desktop/work/practice/vue-family/vue/my-vuex.js","mtime":1628177018709},{"path":"/Users/june/Desktop/work/practice/vue-family/node_modules/cache-loader/dist/cjs.js","mtime":1627479180074},{"path":"/Users/june/Desktop/work/practice/vue-family/node_modules/babel-loader/lib/index.js","mtime":1627479180059}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvanVuZS9EZXNrdG9wL3dvcmsvcHJhY3RpY2UvdnVlLWZhbWlseS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9qdW5lL0Rlc2t0b3Avd29yay9wcmFjdGljZS92dWUtZmFtaWx5L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2p1bmUvRGVza3RvcC93b3JrL3ByYWN0aWNlL3Z1ZS1mYW1pbHkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKdmFyIFZ1ZTsKCnZhciBTdG9yZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3RvcmUob3B0aW9ucykgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RvcmUpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY29tbWl0IiwgZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgdmFyIHR5cGUgPSBfcmVmLnR5cGU7CiAgICAgIHZhciBmbiA9IF90aGlzLm9wdGlvbnMubXV0YXRpb25zW3R5cGVdOwoKICAgICAgaWYgKCFmbikgewogICAgICAgIHRocm93IG5ldyBFcnJvcigi6ZSZ6K+v55qE57G75Z6LIik7CiAgICAgIH0KCiAgICAgIGZuKF90aGlzLnN0YXRlKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZGlzcGF0Y2giLCBmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgdmFyIHR5cGUgPSBfcmVmMi50eXBlOwogICAgICB2YXIgZm4gPSBfdGhpcy5vcHRpb25zLmFjdGlvbnNbdHlwZV07CgogICAgICBpZiAoIWZuKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCLplJnor6/nmoTnsbvlnosiKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZuKHsKICAgICAgICBzdGF0ZTogX3RoaXMuc3RhdGUsCiAgICAgICAgY29tbWl0OiBfdGhpcy5jb21taXQsCiAgICAgICAgZGlzcGF0Y2g6IF90aGlzLmRpc3BhdGNoCiAgICAgIH0pOwogICAgfSk7CgogICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKICAgIHRoaXMuZ2V0dGVyID0ge307CiAgICB0aGlzLl9nZXR0ZXIgPSBvcHRpb25zLmdldHRlcjsKICAgIHZhciBjb21wdXRlZCA9IHt9OwogICAgT2JqZWN0LmtleXModGhpcy5fZ2V0dGVyKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgY29tcHV0ZWRba2V5XSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuX2dldHRlcltrZXldKF90aGlzLnN0YXRlLCBfdGhpcy5nZXR0ZXIpOwogICAgICB9OwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF90aGlzLmdldHRlciwga2V5LCB7CiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMuX3N0YXRlW2tleV07CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy5fc3RhdGUgPSBuZXcgVnVlKHsKICAgICAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgX3N0b3JlOiBvcHRpb25zLnN0YXRlCiAgICAgICAgfTsKICAgICAgfSwKICAgICAgY29tcHV0ZWQ6IGNvbXB1dGVkCiAgICB9KTsKICB9CgogIF9jcmVhdGVDbGFzcyhTdG9yZSwgW3sKICAgIGtleTogInN0YXRlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fc3RhdGUuX2RhdGEuX3N0b3JlOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIuS4jeWFgeiuuOaTjeS9nOWGhemDqOWPmOmHjyIpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFN0b3JlOwp9KCk7CgpmdW5jdGlvbiBpbnN0YWxsKF9WdWUpIHsKICBWdWUgPSBfVnVlOwogIFZ1ZS5taXhpbih7CiAgICBiZWZvcmVDcmVhdGU6IGZ1bmN0aW9uIGJlZm9yZUNyZWF0ZSgpIHsKICAgICAgaWYgKHRoaXMuJG9wdGlvbnMuc3RvcmUpIHsKICAgICAgICBWdWUucHJvdG90eXBlLiRzdG9yZSA9IHRoaXMuJG9wdGlvbnMuc3RvcmU7CiAgICAgIH0KICAgIH0KICB9KTsKfQoKZXhwb3J0IGRlZmF1bHQgewogIFN0b3JlOiBTdG9yZSwKICBpbnN0YWxsOiBpbnN0YWxsCn07"},{"version":3,"sources":["/Users/june/Desktop/work/practice/vue-family/vue/my-vuex.js"],"names":["Vue","Store","options","type","fn","mutations","Error","state","actions","commit","dispatch","getter","_getter","computed","Object","keys","forEach","key","defineProperty","get","_state","data","_store","_data","val","install","_Vue","mixin","beforeCreate","$options","store","prototype","$store"],"mappings":";;;;;AAAA,IAAIA,GAAJ;;IACMC,K;AACF,iBAAYC,OAAZ,EAAqB;AAAA;;AAAA;;AAAA,oCA6BZ,gBAAc;AAAA,UAAXC,IAAW,QAAXA,IAAW;AACnB,UAAMC,EAAE,GAAG,KAAI,CAACF,OAAL,CAAaG,SAAb,CAAuBF,IAAvB,CAAX;;AACA,UAAI,CAACC,EAAL,EAAS;AACL,cAAM,IAAIE,KAAJ,CAAU,OAAV,CAAN;AACH;;AACDF,MAAAA,EAAE,CAAC,KAAI,CAACG,KAAN,CAAF;AACH,KAnCoB;;AAAA,sCAqCV,iBAAc;AAAA,UAAXJ,IAAW,SAAXA,IAAW;AACrB,UAAMC,EAAE,GAAG,KAAI,CAACF,OAAL,CAAaM,OAAb,CAAqBL,IAArB,CAAX;;AACA,UAAI,CAACC,EAAL,EAAS;AACL,cAAM,IAAIE,KAAJ,CAAU,OAAV,CAAN;AACH;;AACD,aAAOF,EAAE,CAAC;AAAEG,QAAAA,KAAK,EAAE,KAAI,CAACA,KAAd;AAAqBE,QAAAA,MAAM,EAAE,KAAI,CAACA,MAAlC;AAA0CC,QAAAA,QAAQ,EAAE,KAAI,CAACA;AAAzD,OAAD,CAAT;AACH,KA3CoB;;AACjB,SAAKR,OAAL,GAAeA,OAAf;AACA,SAAKS,MAAL,GAAc,EAAd;AACA,SAAKC,OAAL,GAAeV,OAAO,CAACS,MAAvB;AACA,QAAME,QAAQ,GAAG,EAAjB;AACAC,IAAAA,MAAM,CAACC,IAAP,CAAY,KAAKH,OAAjB,EAA0BI,OAA1B,CAAkC,UAAAC,GAAG,EAAE;AACnCJ,MAAAA,QAAQ,CAACI,GAAD,CAAR,GAAgB,YAAI;AACjB,eAAO,KAAI,CAACL,OAAL,CAAaK,GAAb,EAAkB,KAAI,CAACV,KAAvB,EAA6B,KAAI,CAACI,MAAlC,CAAP;AACF,OAFD;;AAGAG,MAAAA,MAAM,CAACI,cAAP,CAAsB,KAAI,CAACP,MAA3B,EAAkCM,GAAlC,EAAsC;AAClCE,QAAAA,GAAG,EAAC;AAAA,iBAAI,KAAI,CAACC,MAAL,CAAYH,GAAZ,CAAJ;AAAA;AAD8B,OAAtC;AAGH,KAPD;AAQA,SAAKG,MAAL,GAAc,IAAIpB,GAAJ,CAAQ;AAClBqB,MAAAA,IADkB,kBACX;AACH,eAAO;AACHC,UAAAA,MAAM,EAAEpB,OAAO,CAACK;AADb,SAAP;AAGH,OALiB;AAMlBM,MAAAA,QAAQ,EAARA;AANkB,KAAR,CAAd;AAQH;;;;SACD,eAAY;AACR,aAAO,KAAKO,MAAL,CAAYG,KAAZ,CAAkBD,MAAzB;AACH,K;SACD,aAAUE,GAAV,EAAe;AACX,YAAM,IAAIlB,KAAJ,CAAU,WAAV,CAAN;AACH;;;;;;AAkBL,SAASmB,OAAT,CAAiBC,IAAjB,EAAuB;AACnB1B,EAAAA,GAAG,GAAG0B,IAAN;AACA1B,EAAAA,GAAG,CAAC2B,KAAJ,CAAU;AACNC,IAAAA,YADM,0BACS;AACX,UAAI,KAAKC,QAAL,CAAcC,KAAlB,EAAyB;AACrB9B,QAAAA,GAAG,CAAC+B,SAAJ,CAAcC,MAAd,GAAuB,KAAKH,QAAL,CAAcC,KAArC;AACH;AACJ;AALK,GAAV;AAOH;;AACD,eAAe;AACX7B,EAAAA,KAAK,EAALA,KADW;AAEXwB,EAAAA,OAAO,EAAPA;AAFW,CAAf","sourcesContent":["let Vue;\nclass Store {\n    constructor(options) {\n        this.options = options;\n        this.getter = {};\n        this._getter = options.getter;\n        const computed = {}\n        Object.keys(this._getter).forEach(key=>{\n            computed[key] = ()=>{\n               return this._getter[key](this.state,this.getter)\n            };\n            Object.defineProperty(this.getter,key,{\n                get:()=>this._state[key]\n            })\n        })\n        this._state = new Vue({\n            data() {\n                return {\n                    _store: options.state\n                }\n            },\n            computed,\n        });\n    }\n    get state() {\n        return this._state._data._store;\n    }\n    set state(val) {\n        throw new Error(\"不允许操作内部变量\")\n    }\n\n    commit = ({ type }) => {\n        const fn = this.options.mutations[type];\n        if (!fn) {\n            throw new Error(\"错误的类型\");\n        }\n        fn(this.state)\n    }\n\n    dispatch = ({ type }) => {\n        const fn = this.options.actions[type];\n        if (!fn) {\n            throw new Error(\"错误的类型\");\n        }\n        return fn({ state: this.state, commit: this.commit, dispatch: this.dispatch })\n    }\n}\nfunction install(_Vue) {\n    Vue = _Vue;\n    Vue.mixin({\n        beforeCreate() {\n            if (this.$options.store) {\n                Vue.prototype.$store = this.$options.store;\n            }\n        }\n    })\n}\nexport default {\n    Store,\n    install\n}"]}]}